from config import Config
from libs import MAX7219


class FaceViewer:
    def __init__(self, spi):
        self.display = MAX7219(spi, Config.ss_pin, 1)

    def show_mood(self, mood: str):
        moods = {
            "smile": [[1, 1, 1, 0, 0, 1, 1, 1],
                      [1, 0, 1, 0, 0, 1, 0, 1],
                      [1, 1, 1, 0, 0, 1, 1, 1],
                      [0, 0, 0, 0, 0, 0, 0, 0],
                      [0, 0, 0, 0, 0, 0, 0, 0],
                      [0, 1, 0, 0, 0, 0, 1, 0],
                      [0, 0, 1, 1, 1, 1, 0, 0],
                      [0, 0, 0, 0, 0, 0, 0, 0], ],
            "neutral": [[1, 1, 1, 0, 0, 1, 1, 1],
                        [1, 0, 1, 0, 0, 1, 0, 1],
                        [1, 1, 1, 0, 0, 1, 1, 1],
                        [0, 0, 0, 0, 0, 0, 0, 0],
                        [0, 0, 0, 0, 0, 0, 0, 0],
                        [0, 0, 0, 0, 0, 0, 0, 0],
                        [0, 1, 1, 1, 1, 1, 1, 0],
                        [0, 0, 0, 0, 0, 0, 0, 0], ],
            "sad": [[1, 1, 1, 0, 0, 1, 1, 1],
                    [1, 0, 1, 0, 0, 1, 0, 1],
                    [1, 1, 1, 0, 0, 1, 1, 1],
                    [0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 0, 1, 1, 1, 1, 0, 0],
                    [0, 1, 0, 0, 0, 0, 1, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0], ],
            "winking_left_eye": [[0, 0, 0, 0, 0, 1, 1, 1],
                                 [1, 1, 1, 0, 0, 1, 0, 1],
                                 [0, 0, 0, 0, 0, 1, 1, 1],
                                 [0, 0, 0, 0, 0, 0, 0, 0],
                                 [0, 0, 0, 0, 0, 0, 0, 0],
                                 [0, 1, 0, 0, 0, 0, 1, 0],
                                 [0, 0, 1, 1, 1, 1, 0, 0],
                                 [0, 0, 0, 0, 0, 0, 0, 0], ],
            "winking_right_eye": [[1, 1, 1, 0, 0, 0, 0, 0],
                                  [1, 0, 1, 0, 0, 1, 1, 1],
                                  [1, 1, 1, 0, 0, 0, 0, 0],
                                  [0, 0, 0, 0, 0, 0, 0, 0],
                                  [0, 0, 0, 0, 0, 0, 0, 0],
                                  [0, 1, 0, 0, 0, 0, 1, 0],
                                  [0, 0, 1, 1, 1, 1, 0, 0],
                                  [0, 0, 0, 0, 0, 0, 0, 0], ],
            "connected": [[0, 0, 0, 1, 1, 0, 0, 0],
                          [0, 0, 0, 1, 1, 0, 0, 0],
                          [0, 0, 0, 1, 1, 0, 0, 0],
                          [1, 1, 1, 1, 1, 1, 1, 1],
                          [1, 1, 1, 1, 1, 1, 1, 1],
                          [0, 0, 0, 1, 1, 0, 0, 0],
                          [0, 0, 0, 1, 1, 0, 0, 0],
                          [0, 0, 0, 1, 1, 0, 0, 0], ],
        }
        self.display.fill(0)
        self.display.show()
        for i in range(8):
            for j in range(8):
                if moods[mood][i][j]:
                    self.display.pixel(7 - i, j, 1)
        self.display.show()
